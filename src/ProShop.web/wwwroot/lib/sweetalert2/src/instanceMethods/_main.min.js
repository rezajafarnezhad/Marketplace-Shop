/**
 * Minified by jsDelivr using Terser v5.9.0.
 * Original file: /npm/sweetalert2@11.3.0/src/instanceMethods/_main.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import defaultParams,{showWarningsForParams}from"../utils/params.js";import*as dom from"../utils/dom/index.js";import Timer from"../utils/Timer.js";import{callIfFunction}from"../utils/utils.js";import setParameters from"../utils/setParameters.js";import{getTemplateParams}from"../utils/getTemplateParams.js";import globalState from"../globalState.js";import{openPopup}from"../utils/openPopup.js";import privateProps from"../privateProps.js";import privateMethods from"../privateMethods.js";import{handleInputOptionsAndValue}from"../utils/dom/inputUtils.js";import{handleConfirmButtonClick,handleDenyButtonClick,handleCancelButtonClick}from"./buttons-handlers.js";import{addKeydownHandler,setFocus}from"./keydown-handler.js";import{handlePopupClick}from"./popup-click-handler.js";import{DismissReason}from"../utils/DismissReason.js";import{unsetAriaHidden}from"../utils/aria.js";export function _main(t,e={}){showWarningsForParams(Object.assign({},e,t)),globalState.currentInstance&&(globalState.currentInstance._destroy(),dom.isModal()&&unsetAriaHidden()),globalState.currentInstance=this;const o=prepareParams(t,e);setParameters(o),Object.freeze(o),globalState.timeout&&(globalState.timeout.stop(),delete globalState.timeout),clearTimeout(globalState.restoreFocusTimeout);const s=populateDomCache(this);return dom.render(this,o),privateProps.innerParams.set(this,o),swalPromise(this,s,o)}const prepareParams=(t,e)=>{const o=getTemplateParams(t),s=Object.assign({},defaultParams,e,o,t);return s.showClass=Object.assign({},defaultParams.showClass,s.showClass),s.hideClass=Object.assign({},defaultParams.hideClass,s.hideClass),s},swalPromise=(t,e,o)=>new Promise(((s,i)=>{const n=e=>{t.closePopup({isDismissed:!0,dismiss:e})};privateMethods.swalPromiseResolve.set(t,s),privateMethods.swalPromiseReject.set(t,i),e.confirmButton.onclick=()=>handleConfirmButtonClick(t),e.denyButton.onclick=()=>handleDenyButtonClick(t),e.cancelButton.onclick=()=>handleCancelButtonClick(t,n),e.closeButton.onclick=()=>n(DismissReason.close),handlePopupClick(t,e,n),addKeydownHandler(t,globalState,o,n),handleInputOptionsAndValue(t,o),openPopup(o),setupTimer(globalState,o,n),initFocus(e,o),setTimeout((()=>{e.container.scrollTop=0}))})),populateDomCache=t=>{const e={popup:dom.getPopup(),container:dom.getContainer(),actions:dom.getActions(),confirmButton:dom.getConfirmButton(),denyButton:dom.getDenyButton(),cancelButton:dom.getCancelButton(),loader:dom.getLoader(),closeButton:dom.getCloseButton(),validationMessage:dom.getValidationMessage(),progressSteps:dom.getProgressSteps()};return privateProps.domCache.set(t,e),e},setupTimer=(t,e,o)=>{const s=dom.getTimerProgressBar();dom.hide(s),e.timer&&(t.timeout=new Timer((()=>{o("timer"),delete t.timeout}),e.timer),e.timerProgressBar&&(dom.show(s),setTimeout((()=>{t.timeout&&t.timeout.running&&dom.animateTimerProgressBar(e.timer)}))))},initFocus=(t,e)=>{if(!e.toast)return callIfFunction(e.allowEnterKey)?void(focusButton(t,e)||setFocus(e,-1,1)):blurActiveElement()},focusButton=(t,e)=>e.focusDeny&&dom.isVisible(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&dom.isVisible(t.cancelButton)?(t.cancelButton.focus(),!0):!(!e.focusConfirm||!dom.isVisible(t.confirmButton))&&(t.confirmButton.focus(),!0),blurActiveElement=()=>{document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};
//# sourceMappingURL=/sm/d250e6956efd506bcd8435f887fbda4a194f6d958736823e89eb3f10e4d20c2c.map